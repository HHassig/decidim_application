{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nrequire(\"formBuilder/dist/form-render.min.js\");\nimport \"src/decidim/decidim_awesome/forms/rich_text_plugin\";\nvar CustomFieldsRenderer = /*#__PURE__*/function () {\n  // eslint-disable-line no-unused-vars\n  function CustomFieldsRenderer(containerSelector) {\n    _classCallCheck(this, CustomFieldsRenderer);\n    this.containerSelector = containerSelector || \".proposal_custom_field:last\";\n    this.lang = this.getLang($(\"html\").attr(\"lang\"));\n  }\n  _createClass(CustomFieldsRenderer, [{\n    key: \"getLang\",\n    value: function getLang(lang) {\n      var langs = {\n        // ar: 'ar-SA', // Not in decidim yet\n        \"ar\": \"ar-TN\",\n        \"ca\": \"ca-ES\",\n        \"cs\": \"cs-CZ\",\n        \"da\": \"da-DK\",\n        \"de\": \"de-DE\",\n        \"el\": \"el-GR\",\n        \"en\": \"en-US\",\n        \"es\": \"es-ES\",\n        \"fa\": \"fa-IR\",\n        \"fi\": \"fi-FI\",\n        \"fr\": \"fr-FR\",\n        \"he\": \"he-IL\",\n        \"hu\": \"hu-HU\",\n        \"it\": \"it-IT\",\n        \"ja\": \"ja-JP\",\n        \"my\": \"my-MM\",\n        \"nb\": \"nb-NO\",\n        \"nl\": \"nl-NL\",\n        \"pl\": \"pl-PL\",\n        \"pt\": \"pt-BR\",\n        \"qz\": \"qz-MM\",\n        \"ro\": \"ro-RO\",\n        \"ru\": \"ru-RU\",\n        \"sl\": \"sl-SI\",\n        \"th\": \"th-TH\",\n        \"tr\": \"tr-TR\",\n        \"uk\": \"uk-UA\",\n        \"vi\": \"vi-VN\",\n        \"zh-TW\": \"zh-TW\",\n        \"zh\": \"zh-CN\"\n      };\n      if (langs[lang]) {\n        return langs[lang];\n      }\n      if (langs[lang.substr(0, 2)]) {\n        return langs[lang.substr(0, 2)];\n      }\n      return \"en-US\";\n    }\n\n    /*\n    * Creates an XML document with a subset of html-compatible dl/dd/dt elements\n    * to store the custom fields answers\n    */\n  }, {\n    key: \"dataToXML\",\n    value: function dataToXML(data) {\n      var $dl = $(\"<dl/>\");\n      var $dd = null,\n        $div = null,\n        $dt = null,\n        datum = null,\n        key = null,\n        label = null,\n        text = null,\n        val = null;\n      $dl.attr(\"class\", \"decidim_awesome-custom_fields\");\n      $dl.attr(\"data-generator\", \"decidim_awesome\");\n      $dl.attr(\"data-version\", window.DecidimAwesome.version);\n      for (key in data) {\n        // eslint-disable-line guard-for-in\n        // console.log(\"get the data!\", key, data[key]);\n        // Richtext plugin does not saves userdata, so we get it from the hidden input\n        if (data[key].type === \"textarea\" && data[key].subtype === \"richtext\") {\n          data[key].userData = [$(\"#\".concat(data[key].name, \"-input\")).val()];\n        }\n        if (data[key].userData && data[key].userData.length) {\n          $dt = $(\"<dt/>\");\n          $dt.text(data[key].label);\n          $dt.attr(\"name\", data[key].name);\n          $dd = $(\"<dd/>\");\n          // console.log(\"data for\", key, data[key].name, data[key])\n          for (val in data[key].userData) {\n            // eslint-disable-line guard-for-in\n            $div = $(\"<div/>\");\n            label = data[key].userData[val];\n            text = null;\n            if (data[key].values) {\n              datum = data[key].values.find(function (obj) {\n                return obj.value === label;\n              }); // eslint-disable-line no-loop-func\n              if (datum) {\n                // eslint-disable-line max-depth\n                text = label;\n                label = datum.label;\n              }\n            } else if (data[key].type === \"date\" && label) {\n              datum = new Date(label).toLocaleDateString();\n              if (datum) {\n                // eslint-disable-line max-depth\n                text = label;\n                label = datum;\n              }\n            }\n            // console.log(\"userData\", text, \"label\", label, 'key', key, 'data', data)\n            if (data[key].type === \"textarea\" && data[key].subtype === \"richtext\") {\n              $div.html(label);\n            } else {\n              $div.text(label);\n            }\n            if (text) {\n              $div.attr(\"alt\", text);\n            }\n            $dd.append($div);\n          }\n          $dd.attr(\"id\", data[key].name);\n          $dd.attr(\"name\", data[key].type);\n          $dl.append($dt);\n          $dl.append($dd);\n        }\n      }\n      return \"<xml>\".concat($dl[0].outerHTML, \"</xml>\");\n    }\n  }, {\n    key: \"fixBuggyFields\",\n    value: function fixBuggyFields() {\n      var _this = this;\n      if (!this.$container) {\n        return false;\n      }\n\n      /**\n      * Hack to fix required checkboxes being reset\n      * Issue: https://github.com/Platoniq/decidim-module-decidim_awesome/issues/82\n      */\n      this.$container.find(\".formbuilder-checkbox-group\").each(function (_key, group) {\n        var inputs = $(\".formbuilder-checkbox input\", group);\n        var data = _this.spec.find(function (obj) {\n          return obj.type === \"checkbox-group\";\n        });\n        var values = data.userData;\n        if (!inputs.length || !data || !values) {\n          return;\n        }\n        inputs.each(function (_idx, input) {\n          var index = values.indexOf(input.value);\n          if (index >= 0) {\n            values.splice(index, 1);\n            // setting checked=true do not makes the browser aware that the form is valid if the field is required\n            if (!input.checked) {\n              $(input).click();\n            }\n          } else if (input.checked) {\n            $(input).click();\n          }\n        });\n\n        // Fill \"other\" option\n        var otherOption = $(\".other-option\", inputs.parent())[0];\n        var otherVal = $(\".other-val\", inputs.parent())[0];\n        var otherText = values.join(\" \");\n        if (otherOption) {\n          if (otherText) {\n            otherOption.checked = true;\n            otherOption.value = otherText;\n            otherVal.value = otherText;\n          } else {\n            otherOption.checked = false;\n            otherOption.value = \"\";\n            otherVal.value = \"\";\n          }\n        }\n      });\n\n      /**\n      * Hack to fix required radio buttons \"other\" value\n      * Issue: https://github.com/Platoniq/decidim-module-decidim_awesome/issues/133\n      */\n      this.$container.find(\".formbuilder-radio input.other-val\").on(\"input\", function (input) {\n        var $input = $(input.currentTarget);\n        var $group = $input.closest(\".formbuilder-radio-group\");\n        $group.find(\"input\").each(function (_key, radio) {\n          var name = $(radio).attr(\"name\");\n          if (name && name.endsWith(\"[]\")) {\n            $(radio).attr(\"name\", name.slice(0, -2));\n          }\n        });\n      });\n      return this;\n    }\n\n    // Saves xml to the hidden input\n  }, {\n    key: \"storeData\",\n    value: function storeData() {\n      if (!this.$container) {\n        return false;\n      }\n      var $form = this.$container.closest(\"form\");\n      var $body = $form.find(\"input[name=\\\"\".concat(this.$element.data(\"name\"), \"\\\"]\"));\n      if ($body.length && this.instance) {\n        this.spec = this.instance.userData;\n        $body.val(this.dataToXML(this.spec));\n        this.$element.data(\"spec\", this.spec);\n      }\n      // console.log(\"storeData spec\", this.spec, \"$body\", $body,\"$form\",$form,\"this\",this);\n      return this;\n    }\n  }, {\n    key: \"init\",\n    value: function init($element) {\n      this.$element = $element;\n      this.spec = $element.data(\"spec\");\n      if (!this.$container) {\n        this.$container = $(this.containerSelector);\n      }\n      // console.log(\"init\", $element, \"this\", this)\n      // always use the last field (in case of multilang tabs we only render one form due a limitation of the library to handle several instances)\n      this.instance = this.$container.formRender({\n        i18n: {\n          locale: this.lang,\n          location: \"https://cdn.jsdelivr.net/npm/formbuilder-languages@1.1.0/\"\n        },\n        formData: this.spec,\n        render: true\n      });\n      this.fixBuggyFields();\n    }\n  }]);\n  return CustomFieldsRenderer;\n}();\nexport { CustomFieldsRenderer as default };","map":{"version":3,"names":["require","CustomFieldsRenderer","containerSelector","_classCallCheck","lang","getLang","$","attr","_createClass","key","value","langs","substr","dataToXML","data","$dl","$dd","$div","$dt","datum","label","text","val","window","DecidimAwesome","version","type","subtype","userData","concat","name","length","values","find","obj","Date","toLocaleDateString","html","append","outerHTML","fixBuggyFields","_this","$container","each","_key","group","inputs","spec","_idx","input","index","indexOf","splice","checked","click","otherOption","parent","otherVal","otherText","join","on","$input","currentTarget","$group","closest","radio","endsWith","slice","storeData","$form","$body","$element","instance","init","formRender","i18n","locale","location","formData","render","default"],"sources":["/Users/harrisonhassig/.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.9.1/app/packs/src/decidim/decidim_awesome/forms/custom_fields_renderer.js"],"sourcesContent":["require(\"formBuilder/dist/form-render.min.js\")\nimport \"src/decidim/decidim_awesome/forms/rich_text_plugin\"\n\nexport default class CustomFieldsRenderer { // eslint-disable-line no-unused-vars\n  constructor(containerSelector) {\n    this.containerSelector = containerSelector || \".proposal_custom_field:last\";\n    this.lang = this.getLang($(\"html\").attr(\"lang\"));\n  }\n\n  getLang(lang) {\n    const langs = {\n      // ar: 'ar-SA', // Not in decidim yet\n      \"ar\": \"ar-TN\",\n      \"ca\": \"ca-ES\",\n      \"cs\": \"cs-CZ\",\n      \"da\": \"da-DK\",\n      \"de\": \"de-DE\",\n      \"el\": \"el-GR\",\n      \"en\": \"en-US\",\n      \"es\": \"es-ES\",\n      \"fa\": \"fa-IR\",\n      \"fi\": \"fi-FI\",\n      \"fr\": \"fr-FR\",\n      \"he\": \"he-IL\",\n      \"hu\": \"hu-HU\",\n      \"it\": \"it-IT\",\n      \"ja\": \"ja-JP\",\n      \"my\": \"my-MM\",\n      \"nb\": \"nb-NO\",\n      \"nl\": \"nl-NL\",\n      \"pl\": \"pl-PL\",\n      \"pt\": \"pt-BR\",\n      \"qz\": \"qz-MM\",\n      \"ro\": \"ro-RO\",\n      \"ru\": \"ru-RU\",\n      \"sl\": \"sl-SI\",\n      \"th\": \"th-TH\",\n      \"tr\": \"tr-TR\",\n      \"uk\": \"uk-UA\",\n      \"vi\": \"vi-VN\",\n      \"zh-TW\": \"zh-TW\",\n      \"zh\": \"zh-CN\"\n    };\n    if (langs[lang]) {\n      return langs[lang];\n    }\n    if (langs[lang.substr(0, 2)]) {\n      return langs[lang.substr(0, 2)];\n    }\n    return \"en-US\";\n  }\n\n  /*\n  * Creates an XML document with a subset of html-compatible dl/dd/dt elements\n  * to store the custom fields answers\n  */\n  dataToXML(data) {\n    const $dl = $(\"<dl/>\");\n    let $dd = null, \n        $div = null, \n        $dt = null, \n        datum = null, \n        key = null, \n        label = null, \n        text = null, \n        val = null;\n    $dl.attr(\"class\", \"decidim_awesome-custom_fields\");\n    $dl.attr(\"data-generator\", \"decidim_awesome\");\n    $dl.attr(\"data-version\", window.DecidimAwesome.version);\n    for (key in data) { // eslint-disable-line guard-for-in\n      // console.log(\"get the data!\", key, data[key]);\n      // Richtext plugin does not saves userdata, so we get it from the hidden input\n      if (data[key].type === \"textarea\" && data[key].subtype === \"richtext\") {\n        data[key].userData = [$(`#${data[key].name}-input`).val()];\n      }\n      if (data[key].userData && data[key].userData.length) {\n        $dt = $(\"<dt/>\");\n        $dt.text(data[key].label);\n        $dt.attr(\"name\", data[key].name);\n        $dd = $(\"<dd/>\");\n        // console.log(\"data for\", key, data[key].name, data[key])\n        for (val in data[key].userData) { // eslint-disable-line guard-for-in\n          $div = $(\"<div/>\");\n          label = data[key].userData[val];\n          text = null;\n          if (data[key].values) {\n            datum = data[key].values.find((obj) => obj.value === label); // eslint-disable-line no-loop-func\n            if (datum) { // eslint-disable-line max-depth\n              text = label;\n              label = datum.label;\n            }\n          } else if (data[key].type === \"date\" && label) {\n            datum = new Date(label).toLocaleDateString();\n            if (datum) { // eslint-disable-line max-depth\n              text = label;\n              label = datum;\n            }\n          }\n          // console.log(\"userData\", text, \"label\", label, 'key', key, 'data', data)\n          if (data[key].type === \"textarea\" && data[key].subtype === \"richtext\") {\n            $div.html(label);\n          } else {\n            $div.text(label);\n          }\n          if (text) {\n            $div.attr(\"alt\", text);\n          }\n          $dd.append($div);\n        }\n        $dd.attr(\"id\", data[key].name);\n        $dd.attr(\"name\", data[key].type);\n        $dl.append($dt);\n        $dl.append($dd);\n      }\n    }\n    return `<xml>${$dl[0].outerHTML}</xml>`;\n  }\n\n  fixBuggyFields() {\n    if (!this.$container) {\n      return false;\n    }\n\n    /**\n    * Hack to fix required checkboxes being reset\n    * Issue: https://github.com/Platoniq/decidim-module-decidim_awesome/issues/82\n    */\n    this.$container.find(\".formbuilder-checkbox-group\").each((_key, group) => {\n      const inputs = $(\".formbuilder-checkbox input\", group);\n      const data = this.spec.find((obj) => obj.type === \"checkbox-group\");\n      let values = data.userData;\n      if (!inputs.length || !data || !values) {\n        return;\n      }\n\n      inputs.each((_idx, input) => {\n        let index = values.indexOf(input.value);\n        if (index >= 0) {\n          values.splice(index, 1)\n          // setting checked=true do not makes the browser aware that the form is valid if the field is required\n          if (!input.checked)\n          {$(input).click();}\n        } else if (input.checked)\n        {$(input).click();}\n      });\n\n      // Fill \"other\" option\n      const otherOption = $(\".other-option\", inputs.parent())[0];\n      const otherVal = $(\".other-val\", inputs.parent())[0];\n      const otherText = values.join(\" \");\n\n      if (otherOption) {\n        if (otherText) {\n          otherOption.checked = true;\n          otherOption.value = otherText;\n          otherVal.value = otherText;\n        } else {\n          otherOption.checked = false;\n          otherOption.value = \"\";\n          otherVal.value = \"\";\n        }\n      }\n    });\n\n    /**\n    * Hack to fix required radio buttons \"other\" value\n    * Issue: https://github.com/Platoniq/decidim-module-decidim_awesome/issues/133\n    */\n    this.$container.find(\".formbuilder-radio input.other-val\").on(\"input\", (input) => {\n      const $input = $(input.currentTarget);\n      const $group = $input.closest(\".formbuilder-radio-group\");\n      $group.find(\"input\").each((_key, radio) => {\n        const name = $(radio).attr(\"name\");\n        if (name && name.endsWith(\"[]\")) {\n          $(radio).attr(\"name\", name.slice(0, -2));\n        }\n      });\n    });\n    return this;\n  }\n\n  // Saves xml to the hidden input\n  storeData() {\n    if (!this.$container) {\n      return false;\n    }\n    const $form = this.$container.closest(\"form\");\n    const $body = $form.find(`input[name=\"${this.$element.data(\"name\")}\"]`);\n    if ($body.length && this.instance) {\n      this.spec = this.instance.userData;\n      $body.val(this.dataToXML(this.spec));\n      this.$element.data(\"spec\", this.spec);\n    }\n    // console.log(\"storeData spec\", this.spec, \"$body\", $body,\"$form\",$form,\"this\",this);\n    return this;\n  }\n\n  init($element) {\n    this.$element = $element;\n    this.spec = $element.data(\"spec\");\n    if (!this.$container) {\n      this.$container = $(this.containerSelector);\n    }\n    // console.log(\"init\", $element, \"this\", this)\n    // always use the last field (in case of multilang tabs we only render one form due a limitation of the library to handle several instances)\n    this.instance = this.$container.formRender({\n      i18n: {\n        locale: this.lang,\n        location: \"https://cdn.jsdelivr.net/npm/formbuilder-languages@1.1.0/\"\n      },\n      formData: this.spec,\n      render: true\n    });\n    this.fixBuggyFields();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}